{% include "languages.md.j2" %}

Ваш Шлюз Streisand содержит пошаговые инструкции для сервисов, которые он предоставляет, а также для зеркал всего необходимого программного обеспечения.

{% if le_ok %}
Эта страница показывает, как подключиться к Шлюзу чтобы настроить клиенты и использовать интерфейс Streisand.
{% else %}
Эта страница содержит инструкции по установке сертификатов SSL и покажет Вам, как соединиться со Шлюзом чтобы использовать сервисы, предоставляемые Streisand.
{% endif %}

---
{% if not le_ok %}
* [Установка SSL-сертификатов](#ssl)
  * [Windows](#ssl-windows)
  * [macOS](#ssl-macos)
  * [Android](#ssl-android)
  * [iOS](#ssl-ios)
  * [Chromium](#ssl-chromium)
  * [Firefox](#ssl-firefox)
  * [Проверить подлинность сертификатов вручную](#ssl-manual)
{% endif %}
* [Соединение с вашим Шлюзом Streisand](#connecting)
  * [SSL](#connecting-ssl)
{% if streisand_tor_enabled %}
  * [Скрытый сервис в сети Tor](#connecting-tor)
{% endif %}


{% if not le_ok %}
<a name="ssl"></a>
Установка SSL-сертификатов
----------------------------
Вы должны установить SSL-сертификат Шлюза, чтобы ваш браузер смог проверить подлинность соединения в автоматическом режиме. Это не позволяет другим вмешиваться в ваш трафик, а также защищает ваши данные для входа. Сертификат находится непосредственно в этой HTML-странице и Вы можете скачать его здесь:
<p><a download="{{ streisand_ipv4_address }}.crt" id="download" href="data:application/x-x509-ca-cert;base64,{{ streisand_certificate_data_uri.stdout }}">Скачать сертификат</a></p>


<a name="ssl-windows"></a>
### Windows ###
Эти инструкции работают для Chrome и Internet Explorer. Firefox использует свой собственный менеджер сертификатов, но его также можно [быстро настроить](#ssl-firefox).

1. [Скачайте](#download) SSL-сертификат, встроенный в эту страницу.
1. Дважды кликните по скачанному файлу, чтобы открыть SSL-сертификат.
1. Нажмите *Установить сертификат...*
1. Запустится Мастер импорта сертификатов. Нажмите *Далее*.
1. Выберите *Поместить все сертификаты в следующее хранилище* и нажмите *Обзор*.
1. Выберите *Доверенные корневые центры сертификации* и нажмите *OK*.
1. Нажмите *Далее* и затем *Завершить*.
1. Подтвердите, что вы хотите установить сертификат, нажав *Да*.
1. Закройте и откройте заново Ваш браузер.
1. Всё готово к подключению. См. [Соединение с вашим Шлюзом Streisand](#connecting-ssl).


<a name="ssl-macos"></a>
### macOS ###
Эти инструкции работают для Chrome и Safari. Firefox использует свой собственный менеджер сертификатов, но его также можно [быстро настроить](#ssl-firefox).

1. Зайдите в *Программы > Утилиты* и запустите *Доступ к keychain*.
1. [Скачайте](#download) SSL-сертификат, встроенный в эту страницу.
1. Перетащите скачанный сертификат в раздел связки ключей для входа.
1. Появится окно с вопросом, хотите ли вы доверять сертификату. Нажмите *Доверять всегда*.
1. Введите свой пароль в ответ на приглашение системы и нажмите *Обновить настройки*.
1. Нажмите правой кнопкой мыши на импортированный сертификат и нажмите *Получить информацию*.
1. Нажмите на стрелку рядом с *Доверие*, появится больше вариантов выбора.
1. Выберите *Всегда доверять* рядом с опцией *Протокол безопасных коммуникаций (SSL)*.
1. Закройте окно сертификата и введите свой пароль снова
1. Всё готово к подключению. См. [Соединение с вашим Шлюзом Streisand](#connecting-ssl).


<a name="ssl-android"></a>
### Android ###
These instructions work for Chrome. Firefox for Android uses its own internal Certificate Manager but does not provide an interface for importing certificates yet. Chrome is therefore the recommended way to connect to the Streisand Gateway.

#### Less secure, but easy ####

1. [Download the SSL certificate](#download) embedded in this document.
1. Email the downloaded certificate to an account that can be accessed from the Android device.
1. Open the email and tap the attachment.
1. A popup will appear. Enter `{{ streisand_server_name }}` for the *Certificate name*, and make sure *VPN and apps* is selected for the *Credential use* value.
1. Tap *OK*.
1. You are ready to connect. See [Connecting to your Streisand Gateway](#connecting-ssl).

#### More secure ####
1. Connect the Android device to your computer.
1. [Download the SSL certificate](#download) embedded in this document.
1. Drag the downloaded certificate to the root of the Android device's filesystem.
1. Launch the *Settings* application.
1. Scroll to the *Personal* section and tap *Security*.
1. Scroll to the *Credential Storage* section and tap *Install from storage*.
1. Select the certificate that you copied to your phone.
1. Enter `{{ streisand_server_name }}` for the *Certificate name*, and make sure *VPN and apps* is selected for the *Credential use* value.
1. Tap *OK*.
1. You are ready to connect. See [Connecting to your Streisand Gateway](#connecting-ssl).


<a name="ssl-ios"></a>
### iOS ###
#### Less secure, but easy ####
1. [Download the SSL certificate](#download) embedded in this document.
1. Email the downloaded certificate to an account that can be accessed from the iOS device.
1. Open the email in the iOS Mail app, and tap the attachment.
1. The *Install Profile* screen will appear. You can view the certificate details and make sure they match the information from the <a href="#verification">SSL Verification</a> section. Tap *Install*.
1. Tap *Install* again when the warning appears.
1. Tap *Done*.
1. You are ready to connect. See [Connecting to your Streisand Gateway](#connecting-ssl).

#### More secure ####
1. Connect the iOS device to your macOS computer.
1. Tap *Trust* if the *Trust This Computer?* popup appears.
1. Install the <a href="https://itunes.apple.com/us/app/apple-configurator-2/id1037126344?mt=12">Apple Configurator 2</a> utility from the Mac App Store.
1. Launch the Apple Configurator utility and agree to the license.
1. Click *Start Preparing Devices*.
1. Click *Install Profiles...*.
1. Turn the phone on and unlock it.
1. Click *Next*.
1. Click *New...* and enter `{{ streisand_server_name }}` in the *Name* field of the *General* section.
1. Scroll down to the *Certificates* section.
1. [Download the SSL certificate](#download) embedded in this document.
1. Click *Configure*, select the downloaded certificate, and click *Open*.
1. Click *Save*.
1. Check the checkbox next to the `{{ streisand_server_name }}` profile you just created. Click *Next*.
1. The *Install Profile* screen will appear on your iOS device. Tap *Install*.
1. Tap *Install* again when the warning appears.
1. Tap *Done*.
1. You are ready to connect. See [Connecting to your Streisand Gateway](#connecting-ssl).


<a name="ssl-chromium"></a>
### Chromium ###
1. Click the Menu button and go to *Settings*.
1. Scroll to the bottom of the window and click *Show advanced settings...*
1. Scroll to the HTTPS/SSL section and click *Manage certificates...*
1. Go the *Authorities* tab.
1. [Download the SSL certificate](#download) embedded in this document.
1. Click *Import...*, select the downloaded certificate, and click *Open*.
1. A popup will appear. Check the box next to *Trust this certificate for identifying websites* and click *OK*.
1. Click *Done*.
1. You are ready to connect. See [Connecting to your Streisand Gateway](#connecting-ssl).


<a name="ssl-firefox"></a>
### Firefox ###
1. Launch Firefox.
1. Open the *Options* panel, and select *Preferences*.
1. Go to the *Privacy & Security* tab.
1. Scroll down to the *Security > Certificates* heading.
1. Click *View Certificates*.
1. A window will appear. Click on the *Authorities* tab.
1. [Download the SSL certificate](#download) embedded in this document.
1. Click *Import...*, select the downloaded certificate, and click *Open*.
1. A popup will appear. Check the box next to *Trust this CA to identify websites* and click *OK*.
1. Click *OK* to close the certificate manager, and then close the *Preferences* panel.
1. You are ready to connect. See [Connecting to your Streisand Gateway](#connecting-ssl).


<a name="ssl-manual"></a>
### Manual SSL Verification ###
*The manual certificate verification option is significantly less secure than installing the certificate using one of the methods above. Your browser will display a warning message, and you are more vulnerable to man-in-the-middle attacks because the fingerprints must be verified on every connection attempt. It should be used with great care, and only as a last resort.*

The certificate details should match the following information:

##### Serial Number #####
`{{ ssl_certificate_serial_number.stdout }}`

##### Fingerprints #####
{% for fingerprint in ssl_certificate_fingerprints.results %}
    {{ fingerprint.stdout }}
{% endfor %}

If everything checks out, you are ready to connect. See [Connecting to your Streisand Gateway](#connecting-ssl).
{% endif %}


<a name="connecting"></a>
Connecting to your Streisand Gateway
------------------------------------

<a name="connecting-ssl"></a>
### SSL ###
{% if le_ok %}
[{{ streisand_domain }}](https://{{ streisand_domain }})
{% else %}
[{{ streisand_gateway_url }}]({{ streisand_gateway_url }})
{% endif %}

username: `{{ streisand_gateway_username }}`
password: `{{ streisand_gateway_password.stdout }}`

{% if streisand_tor_enabled %}
<a name="connecting-tor"></a>
### Tor Hidden Service ###
*All connections to Tor hidden services are fully encrypted.*

[{{ tor_hidden_service_url }}]({{ tor_hidden_service_url }})

username: `{{ streisand_gateway_username }}`
password: `{{ streisand_gateway_password.stdout }}`
{% endif %}
